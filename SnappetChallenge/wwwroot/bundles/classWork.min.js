var SnappetChallenge;(function(n){var t;(function(t){var i=function(){function i(){this.init=function(i,r){var u=new t.classWorkVM(i.dateTimeProvider,i.apiClient,r),f=new n.TemplateForm("classWork",u);return new n.CatalogInitResponse("classWork","#/class-work/today","Class work",[new n.Route("#/class-work/:date",f)])}}return i}();if(t.ClassWorkCatalog=i,n.catalogRegistry)n.catalogRegistry.registerCatalog(new i);else throw new Error("CatalogRegistry service must be declared before any self registring catalogs.");})(t=n.LearningObjectives||(n.LearningObjectives={}))})(SnappetChallenge||(SnappetChallenge={})),function(n){var t;(function(t){var u=n.Models.UserCard,f=function(){function t(t,r,u){var f=this;this.learningObjectives=ko.observableArray([]);this.date=ko.observable();this.loading=ko.observable(!1);this.initialized=ko.observable(!1);this.init=function(n){var i,r;f.initialized(!1);i=t.getCurrent();i.setHours(0,0,0,0);r=n.date==="today"?i:new Date(n.date);f.date(r);f.clear();f.loadData(r);f.initialized(!0)};this.formattedDate=ko.computed(function(){return moment(f.date()).format("MMMM Do")});this.clear=function(){f.learningObjectives([])};this.loadData=function(t){var e=n.Helpers.convertToUtc(t),o=n.Helpers.convertToUtc(moment(t).add("24","hours").toDate()),u;f.loading(!0);u=f.date();r.getLearningObjectives(e,o,function(n){u==f.date()&&f.learningObjectives(n.map(function(n){return new i(n)}))}).always(function(){return f.loading(!1)})};this.date.subscribe(function(n){f.initialized()&&(u.setLocation("#/class-work/"+moment(n).format("YYYY-MM-DD")),f.loadData(f.date()))})}return t}(),i,r;t.classWorkVM=f;i=function(){function n(n){var t=this;this.name=ko.observable();this.domain=ko.observable();this.subject=ko.observable();this.averageProgress=ko.observable();this.users=ko.observableArray([]);this.expanded=ko.observable(!1);this.setData=function(n){t.name(n.name);t.domain(n.domain);t.subject(n.subject);t.averageProgress(n.averageProgress);t.users(n.users.map(function(n){return new r(n)}))};this.toggle=function(){t.expanded(!t.expanded())};this.setData(n)}return n}();t.LearningObjectiveListItemVM=i;r=function(){function n(n){var t=this;this.userId=ko.observable();this.name=ko.observable();this.overallProgress=ko.observable();this.imageId=ko.observable();this.setData=function(n){t.userId(n.userId);t.name(n.name);t.imageId(n.imageId);t.overallProgress(n.overallProgress)};this.userCardData=ko.computed(function(){return new u(t.userId(),t.name(),t.overallProgress(),"/image/"+t.imageId())});this.setData(n)}return n}();t.UserForLearningObjectivListItemVM=r})(t=n.LearningObjectives||(n.LearningObjectives={}))}(SnappetChallenge||(SnappetChallenge={}));